<!DOCTYPE html>

<html lang="en-US"">
<head>
    <title>Item Details</title>
    <link href="{{ url_for('static', path='/styles.css') }}" rel="stylesheet">
</head>

<body>
    <h1>UFODeck</h1>

    <p>Try it.</p>

    <div class="center">
        <button id="windows">Windows turn on/off</button>
        <button id="linux">Linux turn on</button>
    </div>

    <div id="display_status"></div>

    <!-- The Modal -->
    <div id="modal" class="modal">

        <!-- Modal content -->
        <div class="modal-content">
            <span class="close">&times;</span>
            <p id="status">Linux loading...</p>
        </div>

        <script>
            var btn_win = document.getElementById("windows")
            var fake_terminal = document.getElementById("display_status")


            btn_win.onclick = function () {
                var request = new XMLHttpRequest()
                request.open('GET', 'http://localhost:8000/windows/on', true)

                request.onload = function () {
                    var data = JSON.parse(this.response)

                    // Set status system loading
                    let text = document.getElementById("status").innerHTML;
                    let result = text.replace("Linux loading...", data.status);
                    document.getElementById("status").innerHTML = result;

                    fake_terminal.append('\n[username@<hostname> ~]$ ' + 'status')

                }
                request.send()
            }
        </script>

        <script>
            var modal = document.getElementById("modal");
            var btn = document.getElementById("linux");
            var span = document.getElementsByClassName("close")[0];

            // When the user clicks the button, open the modal 
            btn.onclick = function () {
                modal.style.display = "block";
            }

            // When the user clicks on <span> (x), close the modal
            span.onclick = function () {
                modal.style.display = "none";
            }

            // When the user clicks anywhere outside of the modal, close it
            window.onclick = function (event) {
                if (event.target == modal) {
                    modal.style.display = "none";
                }
            }
        </script>

</body>

</html>